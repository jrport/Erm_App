<%= form_with model: pedido, class:'flex-1 p-4 flex xl:h-[90%] flex-col xl:grid xl:grid-cols-3 gap-4' do |form| %>
  <div class='flex flex-col justify-center ml-4'>
    <%= form.label :data_do_pedido, "Data do Pedido" %>
    <%= form.date_field :data_do_pedido, class: 'grow-0 w-[60%] rounded-lg border-1 border-gray-300' %>
    <% pedido.errors[:data_do_pedido].each do |error| %>
      <span class='text-red-500'><%= error %></span> 
    <% end %>
    <br>
    <%= form.label :loja_id, "Loja Remetente" %>
    <%= form.collection_select :loja_id, Loja.all, :id, :nome, {}, {class: 'select select-bordered'} %>
    <% pedido.errors[:loja_id].each do |error| %>
      <span class='text-red-500'><%= error %></span> 
    <% end %>
    <br>
    <%= form.label :observacoes, "Observações" %>
    <%= form.text_area :observacoes, {class: 'h-[9dvh] w-full input input-bordered' ,
                                      rows: 20} %>
                                    <% pedido.errors[:observacoes].each do |error| %>
                                      <span class='text-red-500'><%= error %></span> 
                                    <% end %>
                                    <br>

                                    <!-- buttons -->
                                    <div class='mt-5 grid grid-cols-2 gap-2'>
                                      <%= button_tag class: "btn btn-success", data: { turbo_frame: '_top' } do %>
                                        <div class='mi'>
                                          check
                                        </div>
                                        <div class='text-md'>
                                          Confirmar
                                        </div>
                                      <% end %>
                                      <button type="button" data-action="click->pedidos--item-form#addRow"
                                        class="btn  bg-cyan-500">
                                        <div class='mi'>
                                          add
                                        </div>
                                        <div class='text-md'>
                                          Item
                                        </div>
                                      </button>
                                    </div>
  </div>

  <!-- Table -->
  <div class='overflow-y-auto h-[90%] w-full flex col-span-2 '>
    <div data-pedidos--item-form-target='itemsList' id='items_list' class='rounded-lg w-full overflow-y-auto m-4 bg-white xl:col-span-2  border-2 border-gray-200'>
      <div class='grid rounded-t-lg grid-cols-5 py-1 bg-cyan-800 text-white border-b-2 border-gray-700  divide-x-2 w-full '>
        <div class='text-center'>Item</div>
        <div class='border-x-2 border-x-gray-400 text-center'>Quantidade</div>
        <div class='border-x-2 border-x-gray-400 text-center'>Porção</div>
        <div class='border-x-2 border-x-gray-400 text-center'>Detalhes</div>
        <div class='border-l-2 border-l-gray-400 text-center'></div>
      </div>
      <%= form.fields_for :items_de_pedidos do |item| %>
        <%= render partial: 'pedidos/items_de_pedidos/item_form' , locals: {f: item} %>
      <% end %>
    </div>
  </div>

  <!-- Template for form rows -->
  <template data-pedidos--item-form-target='template'>
    <%= form.fields_for :items_de_pedidos, ItemsDePedido.new, child_index: 'NEW_RECORD' do |item| %>
      <%= render partial: 'pedidos/items_de_pedidos/item_form' , locals: {f: item} %>
    <% end %>
  </template>

<% end %>
